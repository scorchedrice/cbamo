# 데이터베이스 비정규화

## 데이터베이스 비정규화의 필요성

정규화가 완벽하게 이루어지면 **데이터 중복이 최소화**되지만, 다음과 같은 문제가 발생할 수 있다.

| 문제점                 | 설명                                                               |
| ---------------------- | ------------------------------------------------------------------ |
| **JOIN 성능 저하**     | 여러 개의 테이블을 조인해야 하므로 **쿼리 성능이 느려질 수 있음**. |
| **데이터 조회 복잡성** | 데이터를 조회하려면 **여러 테이블을 참조해야 함**.                 |
| **쓰기 연산 증가**     | 정규화된 테이블은 **쓰기 연산 시 여러 테이블을 수정해야 함**.      |

따라서 `성능 최적화`를 위해 경우에 따라서 **비정규화(Denormalization)**을 적용할 수 있다.

- 비정규화는 성능 향상이 필요한 특줭 쿼리나 테이블에 신중하게 적용되어야 한다.
- 데이터베이스의 응답 시간을 단축시키고, 애플리케이션 성능을 향상시키는 것에 집중한다.

### 정규화와 비정규화의 균형

- 과도한 정규화는 데이터베이스의 성능 저하를 일으킬 수 있고, 과도한 비정규화는 데이터 무결성 관리를 복잡하게 할 수 있다.
- 따라서 데이터베이스의 용도와 요구 사항을 정확하게 파악한 후, 적절한 수준의 정규화와 비정규화를 결정해야 한다.

| 기준          | 정규화                             | 비정규화                        |
| ------------- | ---------------------------------- | ------------------------------- |
| **목적**      | 데이터 중복 최소화, 무결성 유지    | 성능 최적화, 조회 속도 개선     |
| **장점**      | 데이터 무결성 유지, 저장 공간 절약 | 빠른 데이터 조회, JOIN 감소     |
| **단점**      | 복잡한 JOIN 발생, 조회 성능 저하   | 데이터 중복, 업데이트 비용 증가 |
| **사용 시점** | 기본적으로 적용                    | 성능 문제가 발생하면 적용       |

- Q. 트랜잭션이 많은 온라인 거래 처리 시스템에서는?

- Q. 대량의 데이터를 빠르게 조회애햔는 분석 시스템에서는 ?

## 데이터베이스 설계 전략

프로젝트를 진행할 때 **어떤 데이터베이스를 설계해야 하는지**, 그리고 **어떤 기술을 선택해야 하는지**가 중요하다.

### **📌 1-1. 데이터 특성 분석**

| 고려 요소            | 설명                                                   |
| -------------------- | ------------------------------------------------------ |
| **데이터 유형**      | 정형 데이터(SQL) vs 비정형 데이터(NoSQL)               |
| **데이터 크기**      | 데이터가 수십만 건인지, 수십억 건인지                  |
| **데이터 변경 빈도** | 업데이트/삭제가 많은지, 조회가 많은지                  |
| **데이터 관계**      | 테이블 간 조인이 많다면 RDBMS가 유리함                 |
| **일관성 vs 가용성** | 데이터 정합성이 중요한가? 아니면 응답 속도가 중요한가? |

---

### **📌 1-2. 데이터베이스 선택 기준**

애플리케이션의 특성에 따라 **SQL (관계형 DB) vs NoSQL (비관계형 DB)**를 선택할 수 있다.

| 기준            | 관계형 데이터베이스 (SQL) | 비관계형 데이터베이스 (NoSQL)     |
| --------------- | ------------------------- | --------------------------------- |
| **예제 DB**     | MySQL, PostgreSQL, Oracle | MongoDB, Redis, DynamoDB          |
| **데이터 구조** | 정형 데이터 (Schema 기반) | 비정형 데이터 (Schema 유연)       |
| **확장성**      | 세로(Scale-up) 확장       | 가로(Scale-out) 확장              |
| **트랜잭션**    | ACID 보장                 | BASE 모델 (Eventually Consistent) |
| **사용 사례**   | 금융, ERP, 전자상거래     | 실시간 로그, IoT, SNS             |

### **✅ SQL을 선택하는 경우**

- 데이터 구조가 **명확**하고 **일관성 유지(ACID)**가 중요한 경우
- **JOIN 연산이 많아야 하는 경우**
- **업데이트(INSERT, UPDATE)가 빈번한 경우**
- 예: 금융 시스템, 전자상거래, ERP 시스템

### **✅ NoSQL을 선택하는 경우**

- **대량의 데이터를 빠르게 저장하고 조회**해야 하는 경우
- 데이터 구조가 **유동적**이고 스키마를 자주 변경해야 하는 경우
- **수평 확장(Scale-out)이 필요한 경우**
- 예: 로그 분석 시스템, SNS 피드, 실시간 추천 시스템
