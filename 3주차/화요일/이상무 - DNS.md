# DNS (Domain Name Server)



## Domain 이란? 

DNS를 알아보기 전에 Domain이 뭔지부터 알아봅시다.

인터넷 주소를 언급할때 흔히 **도메인(Domain)** 또는 도메인 이름 이라고 얘기합니다. 도메인은 웹사이트의 위치를 나타냅니다. 예를 들어 도메인 이름 "google.com"은 IP 주소 "142.250.196.142" 을 가리킵니다. 긴 숫자 보다 문자로 기억하는 것이 더 쉽습니다.

### Domain과 URL의 차이점.

웹 주소라고 하는 URL에는 사이트 도메인 이름과 전송 프로토콜 및 경로 등의 정보가 포함되어있습니다.

![url](https://velog.velcdn.com/images%2Fkkj53051000%2Fpost%2F26f40b54-1b05-49b6-99b8-8700a970d409%2Fimage.png)

## Name Server 란?

해당 도메인에 매핑되는 ip주소로 변환해주는 서버입니다.

아래 사진은 가비아의 네임서버들이며 아래 네임서버를 사용하는 도메인은 해당 네임 서버에서 IP주소를 반환해줍니다.

![NameServer](https://velog.velcdn.com/images%2Fkkj53051000%2Fpost%2Faf1a977e-c706-4274-b6d2-b60ead40e21a%2F%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-02-10%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2012.38.20.png)

ex) abcd.com => 123.123.123.123

## DNS 란?

**DNS(Domain Name System)** 란 도메인 이름(ex. google.com)을 IP 주소로 바꿔주는 역할을 하는 시스템 계층입니다. 일종의 전화번호부 같은 역할입니다.

이로 인해 우리는 숫자로 되어있는 IP주소를 기억하지 않고 해당 주소의 웹 사이트에 접근할 수 있습니다.

![DNS](https://velog.velcdn.com/images%2Fkkj53051000%2Fpost%2F1fc515e6-d627-4e3a-8f5b-9f9a7ec61a32%2F%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-23%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%205.46.34.png)

### 도메인이 작동하는 과정

1. 웹 브라우저에 도메인을 입력하면 먼저 **Recursive(재귀)** **DNS(ex. 통신사) 서버**에서 해당 도메인에 대한 IP주소 캐시데이터가 있는지 확인 후 **Root 네임 서버**로 요청합니다. ( 캐싱된 IP주소가 있다면 바로 IP주소를 반환해줍니다.)

2. **Root DNS** 서버에서 도메인을 받아 TLD(최상위 도메인)을 판단하여 **Recursive(재귀) DNS(ex. 통신사) 서버**로 보냅니다. ( .com 같은 최상위 도메인을 구별하여 알려줍니다. )

3. **Recursive(재귀) DNS(ex. 통신사) 서버는 TLD(최상위 도메인) 네임 서버**에게 요청을 보내며 실제 IP 주소를 가지고 있는 Authoritative 네임 서버 정보를 **Recursive(재귀) DNS(ex. 통신사) 서버**에게 반환해줍니다.

4. **Recursive(재귀) 네임 서버는 Authoritative 네임 서버**에 실제 IP주소를 요청하며
**Authoritative 네임 서버는 Recursive(재귀) 네임 서버**로 도메인 IP 정보를 전송합니다.

5. **Recursive(재귀) 네임 서버(ex. 통신사)**는 최종적으로 요청한 웹 브라우저에 IP 주소를 제공합니다.

6. 웹 브라우저는 응답받은 IP주소를 http 요청합니다.

![도메인 작동원리](https://velog.velcdn.com/images%2Fkkj53051000%2Fpost%2F4a61a0ea-b0dd-41de-a47c-bf0de5df1a31%2F%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-02-10%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%201.07.39.png)

### DNS 서버 종류

1. Root 네임 서버 : DNS 레코드를 요청하는 첫 단계입니다. 비영리 단체인 ICANN(Internet Corporation for Assigned Names and Numbers)이 관리합니다.

2. TLD(최상위 도메인) 네임 서버 : TLD 네임서버는 .com, .co.kr 과 같은 점 뒤에오는 도메인 확장자를 사용하는 모든 도메인 정보를 유지합니다.

3. Authoritative 네임 서버 : 실제 도메인의 IP주소가 기록되는 서버입니다. 도메인/호스팅 업체의 '네임서버'를 말합니다.

4. Recursive(재귀) 네임 서버 : 인터넷 사용자가 가장 먼저 접근하는 DNS 서버로 특정 도메인에 대한 IP정보를 캐시 형태로 저장해놓습니다. 대표적으로 KT/LG/SK 와 같은 ISP(통신사) DNS 서버가 있습니다.

## CS 질문

### DNS란 무엇인가요?

🔹 답변:
DNS(Domain Name System)는 도메인 이름을 IP 주소로 변환해주는 시스템입니다. 사용자가 www.google.com과 같은 도메인을 입력하면, DNS가 해당 도메인에 대한 IP 주소를 찾아 반환하여, 사용자가 해당 서버에 접근할 수 있도록 합니다.

---
### DNS의 작동 원리는 무엇인가요?
🔹 답변:
DNS는 계층적인 구조를 가지며, 다음과 같은 과정으로 동작합니다:

1. 사용자가 www.example.com을 입력하면 로컬 DNS 서버(Resolver) 에 요청합니다.
2. 로컬 DNS 서버에 캐싱된 결과가 없다면, Root DNS 서버에 조회를 보냅니다.
3. Root DNS 서버는 .com 도메인을 관리하는 TLD(Top Level Domain) 서버를 알려줍니다.
4. TLD 서버는 example.com을 관리하는 Authoritative Name Server(권한 있는 네임 서버) 를 알려줍니다.
5. 최종적으로 Authoritative Name Server가 www.example.com의 IP 주소를 반환합니다.
6. 클라이언트는 해당 IP 주소로 웹 서버에 접속합니다.

이 과정에서 캐싱이 적용되어, 같은 요청이 반복될 경우 로컬 DNS 서버가 빠르게 응답할 수 있습니다.

---
### DNS의 주요 레코드(Record) 타입에는 무엇이 있나요?

🔹 답변:
DNS에는 여러 가지 레코드 타입이 존재하며, 주요 레코드는 다음과 같습니다.

| 레코드 타입 | 설명 |
|------------|----------------------------------|
| A         | 도메인을 IPv4 주소로 매핑        |
| AAAA      | 도메인을 IPv6 주소로 매핑        |
| CNAME     | 도메인을 다른 도메인으로 매핑 (별칭) |
| MX        | 메일 서버 정보를 지정            |
| NS        | 해당 도메인을 관리하는 네임서버 정보 |
| TXT       | 도메인에 대한 텍스트 정보를 저장 (SPF, DKIM 등) |

---
### DNS 캐싱이란 무엇이며, 어떤 이점이 있나요?
🔹 답변:
DNS 캐싱은 자주 조회되는 DNS 정보를 저장하여 네트워크 부하를 줄이고 조회 속도를 향상시키는 기법입니다.

✔️ 이점:

- 요청 속도 향상 (DNS 서버에 매번 요청하지 않아도 됨)
- 트래픽 감소 (네트워크 및 서버 부하 감소)
- 신뢰성 증가 (외부 DNS 서버 장애 시에도 일부 사이트는 접근 가능)

✔️ DNS 캐싱 위치:

1. 브라우저 캐시
2. OS(운영체제) 캐시
3. 로컬 DNS 서버 캐시
4. ISP(인터넷 제공업체) DNS 캐시

---
### DNS 스푸핑(DNS Spoofing)이란?
🔹 답변:
DNS 스푸핑(DNS Cache Poisoning)은 공격자가 악성 DNS 응답을 캐시에 저장하여 사용자를 가짜 사이트로 유도하는 공격입니다.

✔️ 공격 방식:

1. 공격자가 DNS 서버를 속여 잘못된 IP 주소를 캐싱하게 만듦
2. 사용자가 정상적인 사이트에 접속하려 하면, 공격자가 설정한 악성 사이트로 유도됨
3. 피싱, 개인정보 탈취 등의 보안 사고가 발생할 수 있음

✔️ 방어 방법:

- DNSSEC(DNS Security Extensions) 사용
- DNS 서버의 보안 패치 적용
- 신뢰할 수 있는 DNS 서비스 이용 (예: Google DNS, Cloudflare DNS)