# TCP & UDP

데이터를 전송할 때 `빠르고 완전하게` 전송되는지 여부는 네트워크 프로토콜의 종류에 따라 달라진다.

동일한 작업을 다르게 수행하는 프로토콜, <u>TCP 와 UDP 각각의 특성을 이해하고 장단점을 비교</u>하여 어떤 서비스에서 적용할 수 있을지 생각해본다!

## 프로토콜이란 ?

프로토콜(protocol)이란 **컴퓨터끼리 데이터를 주고받는 규칙, 약속**을 말한다.

예를 들어, 우리가 대화할 때 "인사 -> 대화 -> 끝인사" 와 같은 규칙이 있듯이,  
컴퓨터도 네트워크에서 데이터를 주고받을 때 **미리 정해진 규칙**을 따른다.  
이 때의 규칙을 프로토콜이라고 한다.

### 대표적인 프로토콜 예시

| 프로토콜                              | 설명                               |
| ------------------------------------- | ---------------------------------- |
| **TCP (전송 제어 프로토콜)**          | 데이터를 신뢰성 있게 전달하는 방식 |
| **UDP (사용자 데이터그램 프로토콜)**  | 빠르게 데이터를 전달하는 방식      |
| **HTTP (하이퍼텍스트 전송 프로토콜)** | 웹사이트를 불러올 때 사용하는 규칙 |
| **FTP (파일 전송 프로토콜)**          | 파일을 주고받을 때 사용하는 규칙   |

---

## TCP 와 UDP 차이 비교

데이터를 전달하는 방식인 두 프로토콜의 차이가 무엇인지 알아보자.

<br>

### TCP (Tranmission Control Permission)

---

1. 연결을 먼저 맺고 (Handshake) 데이터를 주고 받음
2. 데이터가 **순서 대로 도착하도록 보장**
3. 데이터가 손실되면 **재전송**
4. 속도가 느릴 수 있지만, **신뢰성** 확보 가능

---

따라서 데이터의 순서가 중요하고, 신뢰성을 필요로 하는 경우 사용된다.

> **TCP 사용 예시**
>
> - 웹사이트 접속 (HTTP, HTTPS)
> - 파일 다운로드 (FTP)
> - 이메일 전송 (SMTP, TMAP, POP3)

<br>

### UDP (User Datagram Protocol)

---

1. 연결을 맺지 않고 바로 데이터 전송
2. 데이터가 순서대로 도착하는지 **보장하지 않음**
3. 데이터가 손실되더라도 **재전송하지 않음**
4. 속도는 빠르지만, **신뢰성 확보 어려움**

---

TCP와 비교해보면 데이터 속도는 빠르게 전송되지만, 순서 보장 및 손실 우려에 대한 신뢰성 확보가 어렵다.

> **UDP 사용 예시**
>
> - 유튜브 스트리밍 : 동영상 로딩 속도가 중요
> - 온라인 게임 : 손실되더라도 플레이에 대한 빠른 반응이 더 중요
> - 화상 통화, 음성 통화 : 끊김 없이 빠르게 전달되는 것이 중요

### Handshake 란?

UDT는 연결을 맺지 않고 데이터를 전송한다.  
이와 반대로 TCP 에서는 데이터를 보내기 전에 **서로 준비되었는지 확인(연결)** 하는 과정이 필요하다.

이러한 클라이언트와 서버간의 연결을 핸드세이크(handshake)라고 한다.

![3-way handshake](https://static.tosspayments.com/docs/glossary/tcp-handshake.png)
_출처 : 토스 페이먼츠 개발자 센터_

> TCP 3-Way Handshake 과정
>
> 1. 클라이언트 -> 서버 : 연결 요청 (SYN)
> 2. 서버 -> 클라이언트 : 연결 요청 확인 (SYN - ACK)
> 3. 클라이언트 -> 서버 : 패킷 전송 (ACK)

### 패킷(Packet)이란?

패킷은 **데이터를 네트워크에서 주고 받을 때 쪼개서 보내는 작은 단위**이다.  
큰 데이터를 한 번에 보내는 것이 아니라 <u>잘게 쪼개서 보내고 다시 합치는 방식</u>을 사용한다.

그럼 위에서 데이터 전송 방식에 따른 비교를 패킷 전송 차이로 바꿔서 다시 확인해보자.

### TCP와 UDP의 패킷 전송 차이

![udp와 tcp 비교](https://blog.kakaocdn.net/dn/cM0TYe/btsHocMpkNg/KXF1k0kq203aj2cZokfDV1/img.png)
<br>

_출처 : [블로그](https://wnsdufdl.tistory.com/617)_

|                         | TCP (신뢰성 있음)           | UDP (빠름)                            |
| ----------------------- | --------------------------- | ------------------------------------- |
| **패킷 순서 보장**      | O (순서대로 정렬)           | X (순서 보장 안됨)                    |
| **패킷 손실 시 재전송** | O (손실되면 다시 보냄)      | X (손실돼도 신경 안 씀)               |
| **속도**                | 느림 (재전송 때문)          | 빠름 (그냥 보냄)                      |
| **사용 예시**           | 웹사이트, 파일 전송, 이메일 | 온라인 게임, 영상 스트리밍, 음성 통화 |

---
